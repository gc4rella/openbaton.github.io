<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>OpenBaton Documentation</title>
  

  <link rel="shortcut icon" href="../favicon.ico">
  

  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,300,600,700" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Integration Tests";
    var mkdocs_page_input_path = "integration-test-use.md";
    var mkdocs_page_url = "/integration-test-use/";
     var mkdocs_page_url = "/integration-test-use/";
  </script>
  
  <!-- site_name == OpenBaton Documentation -->
  <!-- page_title == Integration Tests -->
  <!-- base_url == .. -->
  <!-- current_page == Integration Tests - /integration-test-use/ [*]
 -->
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-68429895-1', 'openbaton.github.io');
      ga('send', 'pageview');
  </script>
  

<style>

.subnav_drop{
  cursor: pointer;


}

ul.subnav {
/*display:none ;*/
cursor: pointer;
border-bottom: 1px solid #e1e1e5;
}

.subnav:last-child{
  border-bottom: none;

}

ul.subnav:active {
display:block;
}

.wy-menu-vertical li ul {
display: block;

  }

</style>
</head>

<body role="document">

<script type="text/javascript">
$( document).ready(function(){
      //console.log("test");

    //$('.subnav').not( ":has('Integration Tests')" ).hide();
    $('li.subnav_drop').find('ul.subnav').hide();
    //$('li.subnav_drop').find('ul.subnav').each(function(i,e){console.log(i,e)});
       $( ".subnav" ).find( "li:contains('Integration Tests')" ).each(function(i,e){
          var currentElement = $(e);
          currentElement.parent().css({"display":"block","visibility":"visible"}); //css("background-color","blue");
          currentElement.css({"display":"block","visibility":"visible"});
       });//$( ".subnav" ).find( "li:contains('Integration Tests')" ).css("display","block");
       //$(".current").css({"background-color":"blue","display":"block","visibility":"visible"});
       //show(1000,function(i,e){console.log(i,e)});
       //$('li.subnav_drop').find('ul.subnav').css("background-color","blue");
      //$(this).find('ul.subnav').toggle();
    $('li.subnav_drop').click(function(i,e) {  
      $('li.subnav_drop').not(this).find('ul.subnav').hide();
      $(this).find('ul.subnav').toggle();
    }); 

});
   
$( ".wy-nav-content" ).find( "li:contains('Integration Tests')" ).css('color','red');
console.log('--------');
console.log($( ".wy-nav-content" ).find( "div:contains('Integration Tests')" ).css("color","red"));
console.log('--------');
console.log($( ".subnav" ).find( "li:contains('Integration Tests')" ));
console.log('--------');
  </script>



<div class="navcontainer" style="margin:0px; background:#000;">
    <div class="navholder">
      <nav>
        <a href="../../index.html" class="logo"></a>
        <a href="#" id="menu-icon"></a>
        <ul class="navigation">
          
                <li><a href="../../index.html#about">About</a></li>
                <li><a href="../../cases.html">Use Cases</a></li>
                <li><a href="../../features.html">Features</a></li>
                <li><a href="#">Documentation</a></li>
                <li><a href="../../index.html#contact">Contact</a></li>
                <li><a href="http://marketplace.openbaton.org"><i class="material-icons">shopping_cart </i>  Marketplace<div class="ripple-container"></div></a></li>
          </ul>
      </nav>
     </div>
</div>
<div  class="container">
  <div class="holder"> 
        <div class="wy-grid-for-nav">

          
          <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
              <ul class="current">
                
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Get Started</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="..">Get Started</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Installation</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation/">Overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-deb/">Install on Linux</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-mac/">Install on MacOS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-docker/">Install with Docker</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-vagrant/">Install with Vagrant</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-configuration/">Configure it</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>NFV Orchestrator</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../use/">NFVO intro</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../security/">Identity management</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-how-to-use-gui/">Use via the Dashboard</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-how-to-use-cli/">Use via the CLI</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-driver/">Install a VIM Driver</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-instance/">Register a PoP</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnf-package/">VNF Packages</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ns-descriptor/">Network Service Descriptor</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>VNF Managers</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-intro/">VNFM intro</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-generic/">Generic VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-juju/">Juju VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-how-to-write/">Develop a VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-vendor-specific/">Integrate your own VNFM</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Monitoring</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../monitoring/">Monitoring overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../zabbix-plugin/">Zabbix plugin</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Autoscaling</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../autoscaling/">Autoscaling overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Fault Management</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../fault-management/">FM overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Network Slicing</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../network-slicing/">NS overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Marketplace</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../marketplace/">Marketplace overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Tutorials</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../tutorial/">Tutorials overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../dummy-NSR/">Dummy NSR</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../iperf-NSR/">Iperf Scenario</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ims-NSR/">OpenIMSCore example</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../fms-sipp-tutorial/">Fault Management System</a>
        
    </li>


        
             

    <li class="toctree-l1 current">
        <a class="current" href="./">Integration Tests</a>
        
         
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Learn more</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-architecture/">NFVO Architecture</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-driver-create/">Create a VIM Driver</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-sdk/">Open Baton SDKs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../how-to-register-event/">The Event Mechanism tutorial</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>FAQ</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../FAQ/">FAQ</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
              </ul>
            </div>
            &nbsp;
          </nav>
        </div>
    <div class="content_container">
        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

         

          
                <div class="wy-nav-content">
                  <div class="rst-content">
                   
                    <div role="main">
                      <div class="section">
                        
                          <h1 id="how-to-use-the-integration-tests">How to use the Integration Tests</h1>
<h2 id="overview">Overview</h2>
<p>This project provides integration tests for OpenBaton. 
Eleven tests are run.</p>
<h2 id="test-descriptions">Test descriptions</h2>
<ol>
<li>scenario-dummy-iperf</li>
<li>scenario-many-dependencies</li>
<li>scenario-real-iperf</li>
<li>scenario-complex-ncat</li>
<li>scenario-scaling</li>
<li>error-in-configure</li>
<li>error-in-instantiate</li>
<li>error-in-start</li>
<li>error-in-terminate</li>
<li>wrong-lifecycle-event</li>
<li>user-project-test</li>
</ol>
<p><strong>scenario-dummy-iperf</strong> uses the [Dummy VNFM][vnfm-dummy] to simulate a VNFM and therefore tests the communication between NFVO and VNFM. 
It does not actually deploy a network service. The fake network service is a simple iperf scenario with one server and one client. </p>
<p><strong>scenario-many-dependencies</strong> also uses the Dummy VNFM but its fake network service is a little bit more complex in the sense that it has many VNFD with many dependencies between them. </p>
<p>The test <strong>scenario-real-iperf</strong> actually deploys a network service on openstack. 
It consists of two VNFD and deploys one iperf server and two iperf clients. The clients contact the server. </p>
<p>The test <strong>scenario-complex-ncat</strong> deploys a more complex network service on openstack. 
Five virtual machines will be running and acting as peers. 
The following picture shows the architecture in which the peers connect to each other using ncat and send their ip address. 
A peer at the beginning of an arrow acts as an ncat client and connects to the peer at the end of the arrow. 
The receiving peer stores the ip address of the sender so that it is possible to verify which peer connected to which. 
The two colours represent the two different networks on which the peers are running and connecting. 
Blue is the network <em>private</em> and black <em>private2</em>.</p>
<p><img alt="Complex scenario" src="../images/complex-ncat.png" /></p>
<p>The test <strong>scenario-scaling</strong> tests the scaling function of Openbaton. 
It starts by deploying two VMs one acting as an ncat server and one as an ncat client which sends his ip address to the server so that it is possible to check if the client actually connected to the server. 
Then it executes some scaling functions like scale out and scale in and checks if new instances of the server and the client are deployed. Cases like scale in on just one instance and scale out on the maximum number of instances are included. 
It also examines if the client instances are provided with the ip addresses of the new server instances, so that they are able to connect to them. 
To see detailed information about which scaling functions are executed exactly please refer to the <em>scenario-scaling.ini</em> file in the project.</p>
<p>The tests <strong>error-in-configure</strong>, <strong>error-in-instantiate</strong>, <strong>error-in-start</strong>, <strong>error-in-terminate</strong> each deploy a network service from a NSD which contains a failing script in the particular lifecycle event and tests if the NFVO handles it correctly. </p>
<p>The test <strong>wrong-lifecycle-event</strong> tries to onboard a NSD to the NFVO which contains an undefined lifecycle event. The test will pass if the onboarding is not successful. </p>
<p>The <strong>user-project-test</strong> checks if the NFVO handles user and project management correctly. It adds and deletes users, projects and a vim instance from different 
user perspectives. This test can be executed without a VNFManager. </p>
<p>In most of the tests a vim instance and a network service descriptor are stored on the orchestrator and the network service launched. 
If that is successful, the network service is stopped and the network service record, network service descriptor and the vim instance are removed. 
In the cases of the <strong>scenario-real-iperf</strong>, <strong>scenario-complex-ncat</strong> and <strong>scenario-scaling</strong> test also the service itself is tested, i.e. if iperf is running and the clients can connect to the server. Therefore the integration tests will execute some scripts for testing on the virtual machines. </p>
<h2 id="requirements">Requirements</h2>
<ol>
<li>A running <a href="https://github.com/openbaton/NFVO">NFVO</a> with the OpenStack vim driver and Test vim driver</li>
<li>A running <a href="https://github.com/openbaton/generic-vnfm">Generic VNFM</a></li>
<li>A running <a href="https://github.com/openbaton/dummy-vnfm-amqp">Dummy VNFM</a></li>
<li>OpenStack</li>
</ol>
<h2 id="installation-and-configuration">Installation and configuration</h2>
<p>Use git to clone the integration-test project to your machine. 
In <em>integration-tests/src/main/resources</em> is a file named integration-test.properties. 
Open it and set the property values according to your needs. </p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>nfvo-ip</td>
<td>The ip of the machine on which the NFVO you want to use is running</td>
</tr>
<tr>
<td>nfvo-port</td>
<td>The port on which the NFVO is running</td>
</tr>
<tr>
<td>nfvo-usr</td>
<td>The username required for logging in the NFVO</td>
</tr>
<tr>
<td>nfvo-pwd</td>
<td>The password required for logging in the NFVO</td>
</tr>
<tr>
<td>nfvo-project-id</td>
<td>The id of the project that the integration tests shall use</td>
</tr>
<tr>
<td>nfvo-ssl-enabled</td>
<td>Set this to <em>true</em> if the NFVO uses SSL</td>
</tr>
<tr>
<td>local-ip</td>
<td>The ip of the machine on which the integration test is running</td>
</tr>
<tr>
<td>clear-after-test</td>
<td>If set to <em>true</em>, the NFVO will be cleared of all the remaining NSRs, NSD, VNFPackages and Vim-Instances left from previous test</td>
</tr>
<tr>
<td>integration-test-scenarios</td>
<td>Here you can specify a folder in which you can put integration test scenarios. If <em>.ini</em> files exist in this folder, the integration test will use just those files. If there are no files it will use the ones in the projects resource folder</td>
</tr>
<tr>
<td>external-properties-file</td>
<td>If you want to use another file for fetching the properties. It is already preset to <em>/etc/openbaton/integration-test/integration-test.properties</em>. If it does not exist it will not be used.</td>
</tr>
</tbody>
</table>
<p>After that you will also need a keypair for OpenStack. Create one and download the private key as a .pem file. 
Rename it to <em>integration-test.pem</em> and provide it with the needed permissions by executing <em>chmod 400 integration-test.pem</em>.
If it does not exist already create the directory <em>/etc/openbaton/integration-test</em> on your machine and move the pem file into it. 
The next step is to create a vim file. 
Here is an example where you just have to change some fields. </p>
<pre><code class="json">{
  &quot;name&quot;:&quot;vim-instance&quot;,
  &quot;authUrl&quot;:&quot;http://your-openstack-url&quot;,
  &quot;tenant&quot;:&quot;the tenant you use&quot;,
  &quot;username&quot;:&quot;openstack username&quot;,
  &quot;password&quot;:&quot;openstack password&quot;,
  &quot;keyPair&quot;:&quot;in here the one you created&quot;,
  &quot;securityGroups&quot;: [
    &quot;default&quot;
  ],
  &quot;type&quot;:&quot;openstack&quot;,
  &quot;location&quot;:{
    &quot;name&quot;:&quot;your location&quot;,
    &quot;latitude&quot;:&quot;the latitude&quot;,
    &quot;longitude&quot;:&quot;the longitude&quot;
  }
}
</code></pre>

<p>Name the vim file <em>real-vim.json</em> and add it to the folder <em>integration-tests/src/main/resources/etc/json_file/vim_instances/</em> in the project.
In the folder <em>integration-tests/src/main/resources/etc/json_file/network_service_descriptors</em> of the project you will find a file named NetworkServiceDescriptor-iperf-real.json and one named NetworkServiceDescriptor-complex-iperf.json. 
Download the <a href="https://uec-images.ubuntu.com/releases/14.04/release/ubuntu-14.04-server-cloudimg-amd64-disk1.img">ubuntu-14.04-server-cloudimg-amd64-disk1</a> image and store it in OpenStack. </p>
<p>The scenario <em>error-in-terminate.ini</em> needs some special configuration in the NFVO if you want to run it. Change <strong>nfvo.delete.vnfr.wait</strong> to <strong>true</strong> in <em>/etc/openbaton/openbaton.properties</em> before starting the NFVO.</p>
<p>Then use a shell to navigate into the project's root directory. 
Execute the command <em>./integration-tests.sh compile</em>.</p>
<h2 id="start-the-integration-test">Start the integration test</h2>
<p>Before starting the integration tests be sure that the NFVO, Generic VNFM and Dummy VNFM you want to use are already running. 
Then start the test by executing <em>./integration-tests.sh start</em>.
It is possible to specify the test scenarios you want to run so that not every test in the <em>/src/main/resources/integration-test-scenarios</em> folder is executed. 
Therefore use additional command line arguments while starting the integration tests. Every scenario occuring as an argument will be executed. For example <em>./integration-tests.sh start scenario-real-iperf.ini scenario-scaling.ini</em> will just execute the tests described in the files <em>scenario-real-iperf.ini</em> and <em>scenario-scaling.ini</em> located in the folder <em>/src/main/resources/integration-test-scenarios</em>.
If you do not pass any command line arguments, every available scenario will be executed. To see which scenarios are available execute <em>./integration-tests.sh list</em>.</p>
<h2 id="test-results">Test results</h2>
<p>While the tests are running they will produce output to the console. This output will be logged in the file integration-test.log which is in the project's root directory. 
If a test finished it will either tell you that it passed successfully or not. 
If it did not pass correctly you will find the reason in the log output. </p>
<h2 id="write-your-own-integration-tests">Write your own integration tests</h2>
<p>Please refer to <a href="../integration-test-write">this page</a>.</p>
<!---
References

-->

<!---
Script for open external links in a new tab
-->

<script type="text/javascript" charset="utf-8">
      // Creating custom :external selector
      $.expr[':'].external = function(obj){
          return !obj.href.match(/^mailto\:/)
                  && (obj.hostname != location.hostname);
      };
      $(function(){
        $('a:external').addClass('external');
        $(".external").attr('target','_blank');
      })
</script>
                        
                      </div>
                    </div>
                    <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../nfvo-architecture/" class="btn btn-neutral float-right" title="NFVO Architecture"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../fms-sipp-tutorial/" class="btn btn-neutral" title="Fault Management System"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (c) 2016 Open Baton (http://www.openbaton.org)</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          	  
                  </div>
                </div>

        </section>
    </div>
  </div>
</div>



</body>
</html>

