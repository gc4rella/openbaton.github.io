<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>OpenBaton Documentation</title>
  

  <link rel="shortcut icon" href="favicon.ico">
  

  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,300,600,700" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "**HIDDEN**";
    var mkdocs_page_input_path = "tosca-nsd.md";
    var mkdocs_page_url = "/tosca-nsd/";
     var mkdocs_page_url = "/tosca-nsd/";
  </script>
  
  <!-- site_name == OpenBaton Documentation -->
  <!-- page_title == **HIDDEN** -->
  <!-- base_url == .. -->
  <!-- current_page == **HIDDEN** - /tosca-nsd/ [*]
 -->
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-68429895-1', 'openbaton.github.io');
      ga('send', 'pageview');
  </script>
  

<style>

.subnav_drop{
  cursor: pointer;


}

ul.subnav {
/*display:none ;*/
cursor: pointer;
border-bottom: 1px solid #e1e1e5;
}

.subnav:last-child{
  border-bottom: none;

}

ul.subnav:active {
display:block;
}

.wy-menu-vertical li ul {
display: block;

  }

</style>
</head>

<body role="document">

<script type="text/javascript">
$( document).ready(function(){
      //console.log("test");

    //$('.subnav').not( ":has('**HIDDEN**')" ).hide();
    $('li.subnav_drop').find('ul.subnav').hide();
    //$('li.subnav_drop').find('ul.subnav').each(function(i,e){console.log(i,e)});
       $( ".subnav" ).find( "li:contains('**HIDDEN**')" ).each(function(i,e){
          var currentElement = $(e);
          currentElement.parent().css({"display":"block","visibility":"visible"}); //css("background-color","blue");
          currentElement.css({"display":"block","visibility":"visible"});
       });//$( ".subnav" ).find( "li:contains('**HIDDEN**')" ).css("display","block");
       //$(".current").css({"background-color":"blue","display":"block","visibility":"visible"});
       //show(1000,function(i,e){console.log(i,e)});
       //$('li.subnav_drop').find('ul.subnav').css("background-color","blue");
      //$(this).find('ul.subnav').toggle();
    $('li.subnav_drop').click(function(i,e) {  
      $('li.subnav_drop').not(this).find('ul.subnav').hide();
      $(this).find('ul.subnav').toggle();
    }); 

});
   
$( ".wy-nav-content" ).find( "li:contains('**HIDDEN**')" ).css('color','red');
console.log('--------');
console.log($( ".wy-nav-content" ).find( "div:contains('**HIDDEN**')" ).css("color","red"));
console.log('--------');
console.log($( ".subnav" ).find( "li:contains('**HIDDEN**')" ));
console.log('--------');
  </script>



<div class="navcontainer" style="margin:0px; background:#000;">
    <div class="navholder">
      <nav>
        <a href="../../index.html" class="logo"></a>
        <a href="#" id="menu-icon"></a>
        <ul class="navigation">
          
                <li><a href="../../index.html#about">About</a></li>
                <li><a href="../../cases.html">Use Cases</a></li>
                <li><a href="../../features.html">Features</a></li>
                <li><a href="#">Documentation</a></li>
                <li><a href="../../index.html#contact">Contact</a></li>
                <li><a href="http://marketplace.openbaton.org"><i class="material-icons">shopping_cart </i>  Marketplace<div class="ripple-container"></div></a></li>
          </ul>
      </nav>
     </div>
</div>
<div  class="container">
  <div class="holder"> 
        <div class="wy-grid-for-nav">

          
          <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
              <ul class="current">
                
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Get Started</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="..">Get Started</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Installation</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation/">Overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-deb/">Install on Linux</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-mac/">Install on MacOS</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-docker/">Install with Docker</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-installation-vagrant/">Install with Vagrant</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-configuration/">Configure it</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>NFV Orchestrator</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../use/">NFVO intro</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../security/">Identity management</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-how-to-use-gui/">Use via the Dashboard</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-how-to-use-cli/">Use via the CLI</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-instance/">Register a PoP</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnf-package/">VNF Packages</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ns-descriptor/">Network Service Descriptor</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>VIM Driver</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-driver/">VIM Driver Overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>VNF Managers</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-intro/">VNFM intro</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-generic/">Generic VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-juju/">Juju VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-how-to-write/">Develop a VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vnfm-vendor-specific/">Integrate your own VNFM</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Monitoring</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../monitoring/">Monitoring overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../zabbix-plugin/">Zabbix plugin</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Autoscaling</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../autoscaling/">Autoscaling overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Fault Management</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../fault-management/">FM overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Network Slicing</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../network-slicing/">NS overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Marketplace</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../marketplace/">Marketplace overview</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Tutorials</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../tutorial/">Tutorials overview</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../dummy-NSR/">Dummy NSR</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../iperf-NSR/">Iperf Scenario</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../tutorial-sipp/">SIPp example</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../ims-NSR/">OpenIMSCore example</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../tutorial-juju/">OpenIMSCore with Juju VNFM</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../fms-sipp-tutorial/">Fault Management System</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../integration-test-use/">Integration Tests</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>Learn more</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-architecture/">NFVO Architecture</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../vim-driver-create/">Create a VIM Driver</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../nfvo-sdk/">Open Baton SDKs</a>
        
    </li>


        
             

    <li class="toctree-l1 ">
        <a class="" href="../how-to-register-event/">The Event Mechanism tutorial</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
                  <li><ul> 
    
   
    <li class="subnav_drop"><span>FAQ</span>
<ul class="subnav">
        
             

    <li class="toctree-l1 ">
        <a class="" href="../FAQ/">FAQ</a>
        
    </li>


        
</li>
</ul>
    
</ul></li>
                 
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
              </ul>
            </div>
            &nbsp;
          </nav>
        </div>
    <div class="content_container">
        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

         

          
                <div class="wy-nav-content">
                  <div class="rst-content">
                   
                    <div role="main">
                      <div class="section">
                        
                          <h1 id="tosca-network-service-template">TOSCA Network Service Template</h1>
<p>This definition follows the TOSCA Simple Profile for Network Functions Virtualization (NFV) <a href="http://docs.oasis-open.org/tosca/tosca-nfv/v1.0/tosca-nfv-v1.0.html">Version 1.0</a>
In this documentation we will present how to create a TOSCA Network Service Template compliant with OpenBaton. This template can be added to a CSAR and onboarded on the NFVO.</p>
<p>Premise: some of the objects are defined by OpenBaton</p>
<h2 id="mapping-between-tosca-and-etsi-nfv">Mapping between TOSCA and ETSI NFV</h2>
<table>
<thead>
<tr>
<th>TOSCA Type</th>
<th align="right">ETSI Entity</th>
</tr>
</thead>
<tbody>
<tr>
<td>openbaton.type.VNF</td>
<td align="right">Virtual Network Function Descriptor</td>
</tr>
<tr>
<td>tosca.nodes.nfv.VDU</td>
<td align="right">Virtual Deployment Unit</td>
</tr>
<tr>
<td>tosca.nodes.nfv.VL</td>
<td align="right">Virtual Link Descriptor</td>
</tr>
<tr>
<td>tosca.nodes.nfv.CP</td>
<td align="right">Connection Point</td>
</tr>
</tbody>
</table>
<h2 id="structure">Structure</h2>
<p>We are going to create a Template that represents a dummy scenario, similiar to the one explained <a href="../dummy-NSR">here</a>, to illustrate how the Templates have to be structured and what can be specified.</p>
<p>The Template has the following structure: </p>
<pre><code class="yaml">tosca_definitions_version: tosca_1.0
description: Example of NS Template

metadata:
  ID: dummy-NS
  vendor: Fokus
  version: 0.1

topology_template: #Explained below
relationships_template: #Explained below
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>tosca_definitions_version</td>
<td>The version of the template that follows it.</td>
</tr>
<tr>
<td>description</td>
<td>A short description of the template.</td>
</tr>
<tr>
<td>metadata</td>
<td>An Object containing metadata about the Network Service - name, version and creator.</td>
</tr>
<tr>
<td>relationships_template</td>
<td>Explained below</td>
</tr>
<tr>
<td>topology_template</td>
<td>Explained below</td>
</tr>
</tbody>
</table>
<h2 id="topology-template">Topology Template</h2>
<p>For now the Topology template includes only the Node Templates. </p>
<h2 id="node-templates">Node Templates</h2>
<p>The Node Templates are the description of the objects which constitute the Network Service Descriptor. Each node is defined by its name and the parameters needed to create its descriptor.</p>
<h3 id="node-template-virtual-network-function-vnf">Node Template: Virtual Network Function (VNF)</h3>
<p>This is an example of VNF Template defined inside the NSD Template. The parameters available and needed to create a Virtual Network Function Descriptor are defined and explained below: </p>
<pre><code class="yaml">dummy-server:
        type: openbaton.type.VNF
        properties:
          vendor: Fokus
          version: 0.1
          endpoint: dummy
          type: server
          configurations:
            name: config_name
            configurationParameters:
              - key: value
              - key2: value2
          vnfPackageLocation: https://github.com/openbaton/vnf-scripts.git
          deploymentFlavour:
            - flavour_key: m1.small
        requirements:
          - virtualLink: private
          - vdu: VDU2
        interfaces:
          lifecycle: # lifecycle
            instantiate:
              - install.sh
              - start-srv.sh
</code></pre>

<p>This Virtual Network Function is called <code>dummy-server</code> </p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">openbaton.type.VNF</td>
<td align="right">Type of the node. In the example it defines the node as a VNF node.</td>
</tr>
<tr>
<td>properties</td>
<td align="right">See the Table below</td>
<td align="right">Defines parameters needed for deploying a VNFD</td>
</tr>
<tr>
<td>requirements</td>
<td align="right">See the Table below</td>
<td align="right">Describes the component requirements for the VNF</td>
</tr>
<tr>
<td>interfaces</td>
<td align="right">See the Table below</td>
<td align="right">Defines the lifecycle events and the scripts needed for their execution.</td>
</tr>
</tbody>
</table>
<p>The <strong>Properties</strong> for the VNF are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>vendor</td>
<td align="right">String</td>
<td align="right">Name of the provider of the VNF</td>
</tr>
<tr>
<td>version</td>
<td align="right">String</td>
<td align="right">Version of the provider of the VNF</td>
</tr>
<tr>
<td>configurations</td>
<td align="right">Object with two values <strong>name</strong>, <strong>configurationParameters</strong></td>
<td align="right"><strong>name</strong>: is a String with the name of the Configuration, <strong>configurationParameters</strong>: the list of Parameters defined by a pair of &lt; key, value &gt;</td>
</tr>
<tr>
<td>vnfPackageLocation</td>
<td align="right">URL</td>
<td align="right">It is URL where the Orchestrator will fetch the Scripts needed in the lifecycle events defined in the <strong>interfaces</strong></td>
</tr>
<tr>
<td>deploymentFlavour</td>
<td align="right">List of flavour_key</td>
<td align="right">It is a list flavors each one refers to Virtual hardware templates called "flavors" in OpenStack</td>
</tr>
<tr>
<td>endpoint</td>
<td align="right">String</td>
<td align="right">The VNFManager deploying the VNF itself</td>
</tr>
</tbody>
</table>
<p>The <strong>Requirements</strong> for the VNF is an object containing a list of String key-value pairs and the keys are defined the following way:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>virtualLink</td>
<td align="right">String</td>
<td align="right">Shows where the VNF is connected</td>
</tr>
<tr>
<td>vdu</td>
<td align="right">String</td>
<td align="right">Defines a VDU which is a part of the VNF</td>
</tr>
</tbody>
</table>
<p>The <strong>Interfaces</strong> for the VNF has only one option at the moment: <strong>lifecycle</strong></p>
<p>For the <strong>lifecycle</strong> object are the following events defined in compliance with the ETSI Lifecycle Events. </p>
<table>
<thead>
<tr>
<th>Lifecycle event</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>INSTANTIATE</td>
<td align="right">List of Script files</td>
<td align="right">The Scripts will be called for this Lifecycle event</td>
</tr>
<tr>
<td>CONFIGURE</td>
<td align="right">List of Script files</td>
<td align="right">The Scripts will be called for this Lifecycle event</td>
</tr>
<tr>
<td>START</td>
<td align="right">List of Script files</td>
<td align="right">The Scripts will be called for this Lifecycle event</td>
</tr>
<tr>
<td>STOP</td>
<td align="right">List of Script files</td>
<td align="right">The Scripts will be called for this Lifecycle event</td>
</tr>
<tr>
<td>TERMINATE</td>
<td align="right">List of Script files</td>
<td align="right">The Scripts will be called for this Lifecycle event</td>
</tr>
</tbody>
</table>
<h3 id="node-template-virtual-deployment-unit-vdu">Node Template: Virtual Deployment Unit (VDU)</h3>
<p>This is an example of a VDU template and similar to above after that we explain briefly the components of the template.</p>
<pre><code class="yaml">VDU2:
  type: tosca.nodes.nfv.VDU
  properties:
    scale_in_out: 2
    vim_instance_name:
         - test-vim-instance
  artifacts:
    type: tosca.artifacts.Deployment.Image.VM
    file: ubuntu-14.04-server-cloudimg-amd64-disk1
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">tosca.nodes.nfv.VDU</td>
<td align="right">Type of the node. In the example it defines the node as a VDU node.</td>
</tr>
<tr>
<td>properties</td>
<td align="right">See the Table below</td>
<td align="right">Defines parameters needed for deploying a VDU</td>
</tr>
<tr>
<td>requirements</td>
<td align="right">List of requirement</td>
<td align="right">Describes the component requirements for the VDU</td>
</tr>
<tr>
<td>artifacts</td>
<td align="right">List of artifacts</td>
<td align="right">Describes the list of images in OpenStack that will be used to instantiate a VNFC</td>
</tr>
</tbody>
</table>
<p>The <strong>Properties</strong> Object of a VDU node has the following components:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>scale_in_out</td>
<td align="right">Integer</td>
<td align="right">Maximum value of VNFCs that can be instantiated in the process of scale-in/out</td>
</tr>
<tr>
<td>vim_instance_name</td>
<td align="right">List &lt; String &gt;</td>
<td align="right">Names of Points of Persistence (PoP) where this VNFC will be instantiated <strong>NOTE:</strong> This is not required.</td>
</tr>
</tbody>
</table>
<p>The <strong>Artifacts</strong> Object of a VDU node has the following components:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">tosca.artifacts.Deployment.Image.VM</td>
<td align="right">Only one type supported at the moment</td>
</tr>
<tr>
<td>file</td>
<td align="right">String</td>
<td align="right">Name of the file located on OpenStack</td>
</tr>
</tbody>
</table>
<p>The <strong>Requirements</strong> Object of a VDU node defines a list of virtual links to Connection Points. Exactly like the VNF Node the <strong>Requirements</strong> define a list of key-value pair, but in this case the only key is defined as follows:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>virtualLink</td>
<td align="right">String</td>
<td align="right">Shows where the VDU is connected</td>
</tr>
</tbody>
</table>
<h3 id="node-template-connection-point-cp">Node Template: Connection Point (CP)</h3>
<p>This is an example of a CP template and similar to above after that we explain briefly the components of the template.</p>
<pre><code class="yaml">CP1:
  type: tosca.nodes.nfv.CP
  properties:
    floatingIP: random
  requirements:
    - virtualBinding: VDU1
    - virtualLink: private

</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">tosca.nodes.nfv.CP</td>
<td align="right">Type of the node. In the example it defines the node as a CP node.</td>
</tr>
<tr>
<td>properties: floatingIP</td>
<td align="right">String</td>
<td align="right">Only property defined at the moment is <strong>floatingIP</strong>. In this case <strong>floatingIp</strong> means that has a public IP chosen <strong>random</strong>  by OpenStack</td>
</tr>
<tr>
<td>requirements: virtualBinding</td>
<td align="right">String</td>
<td align="right">It describes the requirements for the CP in the example above the CP needs a <strong>virtualBinding</strong> to the VDU in this case <strong>VDU1</strong>. The bindings can be multiple hence the requirements is a node.</td>
</tr>
<tr>
<td>requirements: virtualLink</td>
<td align="right">String</td>
<td align="right">It refers to Node Template which describes the Virtual Link in this case the Virtual Link is called <strong>private</strong>. Same applies here regarding requirements being a list.</td>
</tr>
</tbody>
</table>
<h3 id="node-template-virtual-link-vl">Node Template: Virtual Link (VL)</h3>
<p>OpenBaton uses Virtual Link names as subnets from OpenStack.</p>
<p>This is the definition of a Virtual Link called <strong>private</strong>:</p>
<pre><code class="yaml">
private:
  type: tosca.nodes.nfv.VL
  properties:
    vendor: Fokus
</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">tosca.nodes.nfv.VL</td>
<td align="right">It is the type of the node. In this example Virtual Link.</td>
</tr>
<tr>
<td>properties:vendor</td>
<td align="right">String</td>
<td align="right">Information about the vendor of this Virtual Link.</td>
</tr>
</tbody>
</table>
<h3 id="relationships-template">Relationships Template</h3>
<p>The Relationships Template creates the dependency between two VNFs.
This is the definition of Relationships Template called <code>connection_server_client</code>:</p>
<pre><code class="yaml">
relationships_template:
  connection_server_client:
    type: tosca.nodes.relationships.ConnectsTo
    source: dummy-server
    target: dummy-client
    parameters:
        - private

</code></pre>

<table>
<thead>
<tr>
<th>Name</th>
<th align="right">Value</th>
<th align="right">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td align="right">tosca.nodes.relationships.ConnectsTo</td>
<td align="right">It is the type of the Relationships Template</td>
</tr>
<tr>
<td>source</td>
<td align="right">String</td>
<td align="right">It is a String which refers to the Node Template that describes the source VNF that provides some parameters in order to realize the dependency with the target VNF</td>
</tr>
<tr>
<td>target</td>
<td align="right">String</td>
<td align="right">It is a String which refers to the Node Template that describes the target VNF that requires some parameters in order to realize the dependency with the source VNF</td>
</tr>
<tr>
<td>parameters</td>
<td align="right">List &lt; String &gt;</td>
<td align="right">List of parameters for this dependency</td>
</tr>
</tbody>
</table>
<p><strong>NOTE</strong>: Whenever a value of a given parameter is a string, it is best to put it in quotation marks. Example : </p>
<pre><code class="yaml">configurations:
    name: server-configurations
    configurationParameters:
      - key: &quot;value&quot;

</code></pre>

<h3 id="complete-example">Complete Example</h3>
<pre><code class="yaml">tosca_definitions_version: tosca_simple_profile_for_nfv_1_0
description: Example of NSD

metadata:
  ID: dummy-NS
  vendor: Fokus
  version: 0.1

topology_template:

  node_templates:

    dummy-server:
        type: openbaton.type.VNF
        properties:
          vendor: Fokus
          version: 0.1
          endpoint: dummy
          type: server
          configurations:
            name: server-configurations
            configurationParameters:
              - key: value
              - key2: value2
          vnfPackageLocation: https://github.com/openbaton/vnf-scripts.git
          deployment_flavour:
            - flavour_key: m1.small
            - flavour_key: m1.large
        requirements:
          - virtualLink: private
          - vdu: VDU2
        interfaces:
          lifecycle:
            INSTANTIATE:
              - install.sh
              - install-srv.sh

    dummy-client:
      type: openbaton.type.VNF
      properties:
        ID: x
        vendor: Fokus
        version: 0.1
        type: client
        vnfPackageLocation: https://github.com/openbaton/vnf-scripts.git
        deploymentFlavour:
          - flavour_key: m1.small
        endpoint: dummy
      requirements:
         - virtualLink: private
         - vdu: VDU1
      interfaces:
          lifecycle: # lifecycle
            INSTANTIATE:
              - install.sh
            CONFIGURE:
              - server_start-clt.sh

    VDU1:
      type: tosca.nodes.nfv.VDU
      properties:
        scale_in_out: 1
        vim_instance_name:
          - test-vim-instance
      artifacts:
        VDU1Image:
          type: tosca.artifacts.Deployment.Image.VM
          file: ubuntu-14.04-server-cloudimg-amd64-disk1

    VDU2:
      type: tosca.nodes.nfv.VDU
      properties:
        scale_in_out: 2
        vim_instance_name:
          - test-vim-instance
      requirements:
        - virtual_link: CP2
      artifacts:
        VDU1Image:
          type: tosca.artifacts.Deployment.Image.VM
          file: ubuntu-14.04-server-cloudimg-amd64-disk1

    CP1:
      type: tosca.nodes.nfv.CP
      properties:
        floatingIP: random
      requirements:
        - virtualBinding: VDU1
        - virtualLink: private

    CP2: #endpoints of VNF2
      type: tosca.nodes.nfv.CP
      requirements:
        - virtualBinding: VDU2
        - virtualLink: private

    private:
      type: tosca.nodes.nfv.VL
      properties:
        vendor: Fokus

relationships_template:
  connection_server_client: 
    type: tosca.nodes.relationships.ConnectsTo
    source: dummy-server
    target: dummy-client
    parameters:
        - private


</code></pre>

<p><strong>NOTE</strong>: Save the definition in a file called testNSDIperf.yaml.</p>
<p>You can create a <a href="../tosca-CSAR-onboarding">CSAR</a> and upload it to the NFVO using the <a href="../nfvo-how-to-use-gui">Dashboard</a>.</p>
<!------------
References
-------------->

<!---
Script for open external links in a new tab
-->

<script type="text/javascript" charset="utf-8">
      // Creating custom :external selector
      $.expr[':'].external = function(obj){
          return !obj.href.match(/^mailto\:/)
                  && (obj.hostname != location.hostname);
      };
      $(function(){
        $('a:external').addClass('external');
        $(".external").attr('target','_blank');
      })
</script>
                        
                      </div>
                    </div>
                    <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tosca-CSAR-onboarding/" class="btn btn-neutral float-right" title="**HIDDEN**">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../tosca-vnfd/" class="btn btn-neutral" title="**HIDDEN**"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (c) 2016 Open Baton (http://www.openbaton.org)</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          	  
                  </div>
                </div>

        </section>
    </div>
  </div>
</div>



</body>
</html>

